{% extends "base.html" %}

{% block title %}Sign up{% endblock %}

{% block footer %}

<script>
    $.validator.addMethod('validPassword',
        function (value, element, param) {
            if (value != '') {
                if (value.match(/.*[a-z]+.*/i) == null) {
                    return false;
                }
                if (value.match(/.*\d+.*/) == null) {
                    return false;
                }
            }

            return true;
        },
        'Must contain at least one letter and one number'
    );

    $(document).ready(function () {

        /**
         * Validate the form
         */

        $('#formSignup').validate({
            rules: {
                name: 'required',
                email: {
                    required: true,
                    email: true,
                    remote: '/account/validate-email'
                },
                password: {
                    required: true,
                    minlength: 6,
                    validPassword: true
                },
                password_confirmation: {
                    equalTo: '#inputPassword'
                }
            },
            messages: {
                email: {
                    remote: 'email already taken'
                }
            }
        });
    });
</script>

{% endblock %}

{% block body %}

{% if user.errors is not empty %}
<p>Errors:</p>
<ul>
    {% for error in user.errors %}
    <li>{{ error }}</li>
    {% endfor %}
</ul>
{% endif %}


<main class="text-center signupPage">
    <form class="form-signup w-100 m-auto" method="post" action="/signup/create" id="formSignup">

        <img src="/vendor/icon/person-add.svg" alt="person" height="40">

        <div class="input-group mb-3">

            <span class="input-group-text"> <img src="/vendor/icon/person.svg" alt="human icon" height="30"></span>

            <div class="">
                <label for="inputName">Name</label>
                <input id="inputName" class="form-control" name="name" placeholder="Name" autofocus
                    value="{{ user.name }}" required />


            </div>
        </div>

        <div class="input-group mb-3">

            <span class="input-group-text"> <img src="/vendor/icon/envelope-at.svg" alt="email icon" height="30"></span>


            <div class="">
                <label for="inputEmail">Email address</label>
                <input id="inputEmail" class="form-control" type="email" name="email" placeholder="email address"
                    value="{{ user.email }}" required />
            </div>

        </div>

        <div class="input-group mb-3">

            <span class="input-group-text"> <img src="/vendor/icon/key.svg" alt="key icon" height="30"></span>

            <div class="">
                <label for="inputPassword">Password</label>
                <input type="password" class="form-control" id="inputPassword" name="password" placeholder="Password"
                    required />
            </div>
        </div>

        <div class="input-group mb-3">

            <span class="input-group-text"> <img src="/vendor/icon/key.svg" alt="key icon" height="30"></span>

            <div class="">
                <label for="inputPasswordConfirmation">Repeat password</label>
                <input type="password" class="form-control" id="inputPasswordConfirmation" name="password_confirmation"
                    placeholder="Repeat password" />
            </div>
        </div>

        <button class="w-100 btn btn-lg btn-success" type="submit">Sign up</button>

    </form>
</main>

{% endblock %}